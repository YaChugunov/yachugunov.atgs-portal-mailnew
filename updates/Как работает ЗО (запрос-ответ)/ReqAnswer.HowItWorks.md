# Как работает Запрос-ответ

### Классический запрос-ответ



### <span style="color:red">Важные моменты</span>

- В списке документов (как в основном так и в дополнительном), который выбирается для ответа, нет документов с типом "Ответ"

- Если 

- Если основной ответ был удален, то на его место будет добавлен первый из дополнительных и все связи будут перестроены.


### Несколько ответов на один документ

Допустим Вы формируете документ, который является уже ответом на документ, на который уже был дан основной ответ ранее. В этом случае сервис автоматически это определит и предложит вам добавить ваш ответ в качестве дополнительного.


### Один ответ на несколько документов



### Как работает механизм "Запрос - Ответ"

1. Если выбираем ответный документ в поле основного ответа (inbox_rowID_rel), то в полях выбранного контрдокумента фиксируются
    - номер ответного документа в поле outbox_docID_rel
    - ID ответного документа в поле outbox_rowID_rel
    - KOD ответного документа в поле outbox_koddocmail_rel

2. Если на этот документ формируются дополнительные ответные документы, то они списком записываются в поле outbox_rowIDadd_rel
3. Если на момент записи дополнительных ответных документов поле основного ответа будет пустым, то туда перепишется первый из списка дополнительных